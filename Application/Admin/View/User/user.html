<extend name="Layout/layout"/>
<block name="head">
    <title>用户管理</title>
    <link href='http/fonts.googleapis.com/MS_5.html' rel='stylesheet' type='text/css'>
    <link href='http/fonts.googleapis.com/MS_3.html' rel='stylesheet' type='text/css'>

    <!-- Bootstrap core CSS -->
    <link href="__PUBLIC__/admin/js/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/jquery.gritter/css/jquery.gritter.css" />

    <link rel="stylesheet" href="__PUBLIC__/admin/fonts/font-awesome-4/css/font-awesome.min.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https/oss.maxcdn.com/libs/html5shiv/3.7.0/MS_4.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/jquery.nanoscroller/nanoscroller.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/jquery.easypiechart/jquery.easy-pie-chart.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/bootstrap.switch/bootstrap-switch.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/jquery.select2/select2.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/bootstrap.slider/css/slider.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/js/jquery.datatables/bootstrap-adapter/css/datatables.css" />
    <link href="__PUBLIC__/admin/css/style.css" rel="stylesheet" />

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /></head>
    <style>
        /*.btn-danger{*/
        /*display: none;*/
        /*}*/
        /*#datatable-icons_wrapper input{*/
            /*placehold: Search;*/
        /*}*/
    </style>
</block>

<block name="user">active</block>

<block name="content">
    <div class="page-head">
        <h2>用户信息</h2>
        <ol class="breadcrumb">
            <li><a href="#">首页</a></li>
            <li><a href="#">用户管理</a></li>
            <li class="active">用户信息</li>
        </ol>
    </div>
    <div class="cl-mcont">

        <div class="row">
            <div class="col-md-12">
                <div class="block-flat">
                    <div class="header">
                        <h3>用户信息列表</h3>
                    </div>
                    <div class="content">
                        <div class="table-responsive">
                            <!--<table class="table table-bordered" id="datatable" >-->
                            <!--<table class="table table-bordered" id="datatable-icons" >-->
                                <table class="table table-bordered" id="datatable2" >
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>用户编号</th>
                                    <th>手机号</th>
                                    <th>邮箱</th>
                                    <th>余额</th>
                                    <th>余币</th>
                                    <th>所属会员编号</th>
                                    <th>最后一次登录时间</th>
                                    <th>真实姓名</th>
                                    <th>收货地址</th>
                                    <th>证件号码</th>
                                    <th>银行卡账号</th>
                                    <th>开户银行</th>
                                    <th>开户行地址</th>
                                    <th>状态</th>
                                </tr>
                                </thead>
                                <tbody>

                                <volist name="results" id="result">
                                    <tr class="gradeA">
                                        <td>{$i}</td>
                                        <td>{$result.uid}</td>
                                        <td>{$result.phone}</td>
                                        <td class="center">{$result.email}</td>
                                        <td class="center">{$result.account}</td>
                                        <td class="center">{$result.numcoin}</td>
                                        <td class="center">{$result.mediumer}</td>
                                        <td class="center"><?=date("Y-m-d H:i:s",$result['logintime']);?></td>
                                        <td class="center">{$result.realname}</td>
                                        <td class="center">{$result.place}</td>
                                        <td class="center">{$result.idnumber}</td>
                                        <td class="center">{$result.bankaccount}</td>
                                        <td class="center">{$result.bankopening}</td>
                                        <td class="center">{$result.bankaddres}</td>
                                        <td class="center"><if condition="$result.status eq 1">已认证<else />未认证</if></td>
                                    </tr>
                                </volist>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</block>

<block name="appendJS">
    <script src="__PUBLIC__/admin/js/jquery.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.sparkline/jquery.sparkline.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.easypiechart/jquery.easy-pie-chart.js"></script>
    <script src="https/maps.googleapis.com/maps/api/MS_2.html"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/behaviour/general.js"></script>
    <script src="__PUBLIC__/admin/js/jquery.ui/jquery-ui.js" type="text/javascript"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.nestable/jquery.nestable.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/bootstrap.switch/bootstrap-switch.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
    <script src="__PUBLIC__/admin/js/jquery.select2/select2.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/admin/js/bootstrap.slider/js/bootstrap-slider.js" type="text/javascript"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.gritter/js/jquery.gritter.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.datatables/jquery.datatables.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.datatables/bootstrap-adapter/js/datatables.js"></script>


    <script type="text/javascript">
        //Add dataTable Functions
        var functions = $('<div class="btn-group"><button class="btn btn-default btn-xs" type="button">Actions</button><button data-toggle="dropdown" class="btn btn-xs btn-primary dropdown-toggle" type="button"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button><ul role="menu" class="dropdown-menu pull-right"><li><a href="#">Edit</a></li><li><a href="#">Copy</a></li><li><a href="#">Details</a></li><li class="divider"></li><li><a href="#">Remove</a></li></ul></div>');
        $("#datatable tbody tr td:last-child").each(function(){
            $(this).html("");
            functions.clone().appendTo(this);
        });

        //Add dataTable Icons
        var functions = $('<a class="btn btn-default btn-xs" href="#" data-original-title="Open" data-toggle="tooltip"><i class="fa fa-file"></i></a> <a class="btn btn-primary btn-xs" href="#" data-original-title="Edit" data-toggle="tooltip"><i class="fa fa-pencil"></i></a> <a class="btn btn-danger btn-xs" href="#" data-original-title="Remove" data-toggle="tooltip"><i class="fa fa-times"></i></a>');
        $("#datatable-icons tbody tr td:last-child").each(function(){
            $(this).html("");
            functions.clone().appendTo(this);
        });

        $(document).ready(function(){
            //initialize the javascript
            App.init();
            App.dataTables();

            /* Formating function for row details */
            function fnFormatDetails ( oTable, nTr )
            {
                var aData = oTable.fnGetData( nTr );
                var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';
                sOut += '<tr><td>Rendering engine:</td><td>'+aData[1]+' '+aData[4]+'</td></tr>';
                sOut += '<tr><td>Link to source:</td><td>Could provide a link here</td></tr>';
                sOut += '<tr><td>Extra info:</td><td>And any further details here (images etc)</td></tr>';
                sOut += '</table>';

                return sOut;
            }

            /*
             * Insert a 'details' column to the table
             */
            var nCloneTh = document.createElement( 'th' );
            var nCloneTd = document.createElement( 'td' );
//            nCloneTd.innerHTML = '<img class="toggle-details" src="__PUBLIC__/admin/images/plus.png" />';
            nCloneTd.className = "center";

            $('#datatable2 thead tr').each( function () {
                this.insertBefore( nCloneTh, this.childNodes[0] );
            } );

            $('#datatable2 tbody tr').each( function () {
                this.insertBefore(  nCloneTd.cloneNode( true ), this.childNodes[0] );
            } );

            /*
             * Initialse DataTables, with no sorting on the 'details' column
             */
            var oTable = $('#datatable2').dataTable( {
                "aoColumnDefs": [
                    { "bSortable": false, "aTargets": [ 0 ] }
                ],
                "aaSorting": [[1, 'asc']]
            });

            /* Add event listener for opening and closing details
             * Note that the indicator for showing which row is open is not controlled by DataTables,
             * rather it is done here
             */
            $('#datatable2').delegate('tbody td img','click', function () {
                var nTr = $(this).parents('tr')[0];
                if ( oTable.fnIsOpen(nTr) )
                {
                    /* This row is already open - close it */
                    this.src = "__PUBLIC__/admin/images/plus.png";
                    oTable.fnClose( nTr );
                }
                else
                {
                    /* Open this row */
                    this.src = "__PUBLIC__/admin/images/minus.png";
                    oTable.fnOpen( nTr, fnFormatDetails(oTable, nTr), 'details' );
                }
            } );

            $('.dataTables_filter input').addClass('form-control').attr('placeholder','Search');
            $('.dataTables_length select').addClass('form-control');

            //Horizontal Icons dataTable
            $('#datatable-icons').dataTable();
        });
    </script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="__PUBLIC__/admin/js/behaviour/voice-commands.js"></script>
    <script src="__PUBLIC__/admin/js/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.flot/jquery.flot.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.flot/jquery.flot.pie.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.flot/jquery.flot.resize.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/js/jquery.flot/jquery.flot.labels.js"></script>
</block>

